<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EKRAN ANALÄ°Z | BIST 100 Heatmap</title>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root { 
            --bg: #0e1013; 
            --card: #171a1e; 
            --green: #00c805; 
            --red: #ff3b30; 
            --border: #262b33;
            --text-gray: #848e9c;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            background: var(--bg); 
            color: #fff; 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            overflow: hidden; 
        }
        
        /* Navbar */
        nav { 
            background: #1b1e23; 
            padding: 12px 30px; 
            display: flex; 
            align-items: center; 
            border-bottom: 2px solid var(--border);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        
        .logo { 
            font-size: 24px; 
            font-weight: 900; 
            background: linear-gradient(135deg, var(--green) 0%, #00ff88 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-right: 50px; 
            letter-spacing: -1.5px;
            cursor: pointer;
        }
        
        .nav-tabs { 
            display: flex; 
            background: #0a0b0d; 
            border-radius: 10px; 
            padding: 5px; 
            gap: 5px;
        }
        
        .nav-tabs button { 
            background: transparent; 
            border: none; 
            color: var(--text-gray); 
            padding: 10px 24px; 
            cursor: pointer; 
            border-radius: 8px; 
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .nav-tabs button.active { 
            background: #2b2f36; 
            color: #fff; 
            box-shadow: 0 2px 15px rgba(0,200,5,0.2); 
        }
        
        .settings-btn {
            margin-left: auto;
            background: linear-gradient(135deg, #2b2f36 0%, #1a1d22 100%);
            border: 1px solid var(--border);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .settings-btn:hover {
            background: linear-gradient(135deg, #3a3f47 0%, #2b2f36 100%);
            border-color: var(--green);
        }
        
        /* Grafik */
        #chart { 
            flex: 1; 
            padding: 15px; 
            background: var(--bg);
            cursor: pointer;
        }

        /* Detay Modal */
        #detailModal { 
            display: none; 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: var(--card); 
            width: 90%; 
            max-width: 1200px;
            max-height: 90vh; 
            border-radius: 20px; 
            z-index: 1001; 
            border: 1px solid var(--border); 
            flex-direction: column; 
            box-shadow: 0 25px 60px rgba(0,0,0,0.9); 
        }

        .detail-header {
            padding: 25px 30px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .detail-title {
            font-size: 28px;
            font-weight: 900;
        }

        .close-btn {
            background: transparent;
            border: none;
            color: var(--text-gray);
            font-size: 28px;
            cursor: pointer;
            transition: 0.3s;
        }

        .close-btn:hover { color: #fff; }

        .time-tabs {
            display: flex;
            gap: 10px;
            padding: 20px 30px;
            background: #0a0b0d;
            border-bottom: 1px solid var(--border);
        }

        .time-tabs button {
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-gray);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.3s;
        }

        .time-tabs button.active {
            background: var(--green);
            color: #000;
            border-color: var(--green);
        }

        #detailChart {
            flex: 1;
            padding: 20px 30px;
            overflow-y: auto;
        }

        /* Settings Modal */
        #modal { 
            display: none; 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: var(--card); 
            width: 520px; 
            max-height: 85vh; 
            border-radius: 20px; 
            z-index: 1001; 
            border: 1px solid var(--border); 
            flex-direction: column; 
            box-shadow: 0 25px 60px rgba(0,0,0,0.9); 
        }
        
        .modal-header { 
            padding: 25px; 
            border-bottom: 1px solid var(--border); 
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #fff;
        }
        
        .search-box { 
            width: 100%; 
            padding: 14px 18px; 
            background: #0a0b0d; 
            border: 2px solid var(--border); 
            color: #fff; 
            border-radius: 12px; 
            outline: none;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .search-box:focus {
            border-color: var(--green);
            background: #12131a;
        }
        
        .modal-body { 
            overflow-y: auto; 
            padding: 10px 15px; 
            flex: 1; 
        }
        
        .sector-group {
            margin-bottom: 20px;
        }
        
        .sector-title {
            font-size: 13px;
            font-weight: 700;
            color: var(--text-gray);
            padding: 12px 15px 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stock-row { 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            padding: 14px 15px; 
            border-radius: 10px; 
            cursor: pointer; 
            transition: all 0.2s ease;
            margin-bottom: 4px;
        }
        
        .stock-row:hover { 
            background: #23272e; 
        }
        
        .stock-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .stock-code {
            font-weight: 700;
            font-size: 15px;
            color: #fff;
            min-width: 70px;
        }
        
        .stock-sector {
            font-size: 12px;
            color: var(--text-gray);
            padding: 4px 10px;
            background: #1a1d22;
            border-radius: 6px;
        }
        
        .stock-row input[type="checkbox"] { 
            width: 20px; 
            height: 20px; 
            accent-color: var(--green);
            cursor: pointer;
        }
        
        .overlay { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.85); 
            z-index: 1000; 
            backdrop-filter: blur(6px); 
        }
        
        .save-btn { 
            margin: 20px 25px; 
            padding: 16px; 
            background: linear-gradient(135deg, var(--green) 0%, #00ff88 100%);
            border: none; 
            border-radius: 12px; 
            font-weight: 700; 
            cursor: pointer; 
            font-size: 15px;
            color: #000;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,200,5,0.3);
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0,200,5,0.4);
        }

        /* Scrollbar */
        .modal-body::-webkit-scrollbar, #detailChart::-webkit-scrollbar { width: 8px; }
        .modal-body::-webkit-scrollbar-track, #detailChart::-webkit-scrollbar-track { background: transparent; }
        .modal-body::-webkit-scrollbar-thumb, #detailChart::-webkit-scrollbar-thumb { background: #2b2f36; border-radius: 10px; }
    </style>
</head>
<body>
    <nav>
        <div class="logo" onclick="location.reload()">EKRAN ANALÄ°Z</div>
        <div class="nav-tabs">
            <button onclick="changeV('bist100')" id="b-bist100" class="active">BIST 100</button>
            <button onclick="changeV('mine')" id="b-mine">Favorilerim</button>
        </div>
        <button onclick="openM()" class="settings-btn">
            <span>âš™</span>
            <span>Hisseleri SeÃ§</span>
        </button>
    </nav>

    <div id="chart"></div>

    <!-- Settings Modal -->
    <div class="overlay" id="ov" onclick="closeM()"></div>
    <div id="modal">
        <div class="modal-header">
            <div class="modal-title">ðŸ“Š Hisse SeÃ§imi</div>
            <input type="text" class="search-box" id="srch" placeholder="Hisse kodu veya sektÃ¶r ara... (Ã–rn: SASA, Banka)" onkeyup="fltr()">
        </div>
        <div class="modal-body" id="stock-list"></div>
        <button class="save-btn" onclick="save()">âœ“ DEÄžÄ°ÅžÄ°KLÄ°KLERÄ° KAYDET</button>
    </div>

    <!-- Detail Modal -->
    <div class="overlay" id="detailOv" onclick="closeDetail()"></div>
    <div id="detailModal">
        <div class="detail-header">
            <div class="detail-title" id="detailTitle">-</div>
            <button class="close-btn" onclick="closeDetail()">Ã—</button>
        </div>
        <div class="time-tabs">
            <button onclick="changeTime('1d')" id="t-1d" class="active">1 GÃ¼n</button>
            <button onclick="changeTime('1mo')" id="t-1mo">1 Ay</button>
            <button onclick="changeTime('6mo')" id="t-6mo">6 Ay</button>
            <button onclick="changeTime('1y')" id="t-1y">1 YÄ±l</button>
            <button onclick="changeTime('5y')" id="t-5y">5 YÄ±l</button>
        </div>
        <div id="detailChart"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>