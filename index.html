<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>EKRAN ANALİZ | Isı Haritası</title>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #0a0b0d; --card: #14151a; --green: #00c805; --red: #ff3b30; --border: #2d2e33; --text: #848e9c; }
        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        
        /* Navigasyon */
        nav { background: #1b1e23; padding: 12px 25px; display: flex; align-items: center; border-bottom: 1px solid var(--border); z-index: 10; }
        .logo { font-size: 20px; font-weight: 900; color: var(--green); letter-spacing: -1px; margin-right: 30px; }
        .nav-tabs { display: flex; gap: 5px; background: #000; padding: 4px; border-radius: 8px; }
        .nav-tabs button { background: transparent; border: none; color: var(--text); padding: 8px 16px; cursor: pointer; border-radius: 6px; font-weight: 700; font-size: 13px; }
        .nav-tabs button.active { background: #2b2f36; color: #fff; }

        /* Grafik */
        #chart { flex: 1; width: 100%; background: var(--bg); }

        /* PROFESYONEL SEÇİM MODALI */
        #modal { display:none; position:fixed; top:15%; left:50%; transform:translateX(-50%); background:var(--card); width:450px; max-height:70vh; border-radius:12px; z-index:1001; border: 1px solid var(--border); flex-direction:column; box-shadow: 0 25px 50px rgba(0,0,0,0.9); }
        .modal-header { padding: 20px; border-bottom: 1px solid var(--border); }
        .search-container { position: relative; }
        .search-input { width: 100%; padding: 12px 15px; background: #000; border: 1px solid var(--border); color: #fff; border-radius: 8px; font-size: 15px; outline: none; box-sizing: border-box; }
        .search-input:focus { border-color: var(--green); }
        
        /* Yazmaya başlayınca dökülen liste */
        #stock-list { overflow-y: auto; max-height: 350px; padding: 10px; }
        .stock-row { display: flex; align-items: center; justify-content: space-between; padding: 12px 15px; border-radius: 8px; cursor: pointer; margin-bottom: 2px; transition: 0.2s; }
        .stock-row:hover { background: #23272e; }
        .stock-row.selected { background: rgba(0, 200, 5, 0.1); }
        .stock-info { display: flex; flex-direction: column; }
        .stock-symbol { font-weight: 900; font-size: 16px; }
        .stock-sector { font-size: 11px; color: var(--text); }
        .checkbox-custom { width: 20px; height: 20px; border: 2px solid var(--border); border-radius: 4px; display: flex; align-items: center; justify-content: center; }
        .stock-row.selected .checkbox-custom { background: var(--green); border-color: var(--green); }
        .stock-row.selected .checkbox-custom::after { content: '✓'; color: #000; font-weight: 900; font-size: 14px; }

        .modal-footer { padding: 15px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .save-btn { background: var(--green); color: #000; border: none; padding: 10px 25px; border-radius: 8px; font-weight: 900; cursor: pointer; }
        .overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; backdrop-filter: blur(5px); }
    </style>
</head>
<body>

    <nav>
        <div class="logo">EKRAN ANALİZ</div>
        <div class="nav-tabs">
            <button onclick="setView('all')" id="btn-all" class="active">TÜMÜ</button>
            <button onclick="setView('mine')" id="btn-mine">BENİM SAYFAM</button>
        </div>
        <button onclick="openModal()" style="margin-left:auto; background: #2b2f36; border:none; color:#fff; padding:10px 18px; border-radius:8px; font-weight:bold; cursor:pointer;">⚙ HİSSE SEÇ</button>
    </nav>

    <div id="chart"></div>

    <div class="overlay" id="overlay" onclick="closeModal()"></div>
    <div id="modal">
        <div class="modal-header">
            <div class="search-container">
                <input type="text" class="search-input" id="searchBox" placeholder="Hisse veya sektör ara..." onkeyup="filterStocks()">
            </div>
        </div>
        <div id="stock-list">
            </div>
        <div class="modal-footer">
            <span id="selected-count" style="font-size: 12px; color: var(--text);">0 Hisse Seçildi</span>
            <button class="save-btn" onclick="saveSelection()">UYGULA</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>